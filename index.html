<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>冰島 · 侘寂之旅</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'zen-bg': '#FDFCF8',      // 和紙白
                        'zen-text': '#2C2C2C',    // 墨黑
                        'zen-sub': '#8E8E8E',     // 銀鼠
                        'zen-accent': '#D4AF37',  // 金茶 (點綴)
                        'zen-green': '#8A9A5B',   // 苔色 (景點)
                        'zen-red': '#BC644F',     // 赭石 (美食)
                        'zen-blue': '#748AA6',    // 納戶色 (交通/住宿)
                    },
                    fontFamily: {
                        'serif': ['"Times New Roman"', 'YuMincho', 'Hiragino Mincho ProN', 'serif'],
                        'sans': ['"Helvetica Neue"', 'Arial', 'Hiragino Kaku Gothic ProN', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '0 4px 20px rgba(0, 0, 0, 0.03)',
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #FDFCF8; -webkit-font-smoothing: antialiased; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .font-jp-serif { font-family: "Yu Mincho", "YuMincho", "Hiragino Mincho ProN", "HGSMinchoE", "MS PMincho", serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. 圖標系統 ---
        const Icon = ({ d, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d} /></svg>
        );
        
        const Icons = {
            MapPin: (p) => <Icon d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6" {...p}/>,
            Nav: (p) => <Icon d="M3 11l19-9-9 19-2-8-8-2z" {...p}/>,
            Camera: (p) => <Icon d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z M12 13a4 4 0 1 0 0-8 4 4 0 0 0 0 8" {...p}/>,
            Food: (p) => <Icon d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2 M7 2v20 M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" {...p}/>,
            Bed: (p) => <Icon d="M2 4v16 M2 8h18a2 2 0 0 1 2 2v10 M2 17h20 M6 8v9" {...p}/>,
            Plane: (p) => <Icon d="M2 12h20 M13 18l7-6-7-6 M2 12l5-5m0 10l-5-5" {...p}/>,
            Car: (p) => <Icon d="M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2" {...p}/>,
            Sun: (p) => <Icon d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" {...p}/>,
            Snow: (p) => <Icon d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25 M8 16h.01 M8 20h.01 M12 18h.01 M12 22h.01 M16 16h.01 M16 20h.01" {...p}/>,
            Wind: (p) => <Icon d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2" {...p}/>,
            Briefcase: (p) => <Icon d="M20 7h-3a2 2 0 0 0-2-2h-6a2 2 0 0 0-2 2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z M9 7h6" {...p}/>,
            Phone: (p) => <Icon d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" {...p}/>,
            Wallet: (p) => <Icon d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4 M4 6v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H4z" {...p}/>,
            BookOpen: (p) => <Icon d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" {...p}/>
        };

        // --- 2. 數據資料 (使用來自搜索的更穩定圖片連結) ---
        const tripData = [
            {
                day: 1, date: "11/20", title: "初見冰島", weather: { type: "Snow", temp: "-1°C", wind: "15m/s" },
                stops: [
                    { 
                        time: "15:00", name: "凱夫拉維克機場", type: "arrival", note: "取車，檢查輪胎", query: "Keflavík International Airport", 
                        tags: ["務必檢查車身", "領取WiFi"], 
                        description: "冰島的主要國際門戶。取車時請務必檢查是否已安裝冬季輪胎，並確認車身刮痕狀況。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Keflavik_International_Airport.jpg/1200px-Keflavik_International_Airport.jpg" 
                    },
                    { 
                        time: "16:30", name: "藍湖溫泉", type: "sight", note: "夢幻乳藍色溫泉", query: "Blue Lagoon Iceland", 
                        tags: ["預約代號: BL-9928", "必做: 塗抹白泥面膜"],
                        description: "世界著名的地熱溫泉，湖水呈現夢幻的乳藍色。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Blue_Lagoon_Iceland.jpg/1200px-Blue_Lagoon_Iceland.jpg" 
                    },
                    { 
                        time: "19:00", name: "Bæjarins Beztu 熱狗", type: "food", note: "市區經典小吃", query: "Bæjarins Beztu Pylsur", 
                        tags: ["必點: Eina með öllu (全加)", "平價美食"],
                        description: "柯林頓總統都吃過的熱狗堡，是冰島最有名的小吃。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/B%C3%A6jarins_beztu_pylsur.jpg/1200px-B%C3%A6jarins_beztu_pylsur.jpg" 
                    },
                    { 
                        time: "21:00", name: "雷克雅維克住宿", type: "hotel", note: "Center Hotels Plaza", query: "Center Hotels Plaza Reykjavik", 
                        tags: ["含早餐", "市中心"],
                        description: "位於市中心廣場旁，交通方便。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Reykjavik_center.jpg/1200px-Reykjavik_center.jpg" 
                    }
                ]
            },
            {
                day: 2, date: "11/21", title: "黃金圈探險", weather: { type: "Sun", temp: "0°C", wind: "8m/s" },
                stops: [
                    { 
                        time: "09:30", name: "辛格維利爾", type: "sight", note: "板塊交界處", query: "Thingvellir National Park", 
                        tags: ["世界遺產", "權力遊戲場景"],
                        description: "歐亞板塊與北美板塊的交界，也是世界上最早的議會遺址。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Thingvellir_National_Park_-_panoramio.jpg/1200px-Thingvellir_National_Park_-_panoramio.jpg" 
                    },
                    { 
                        time: "12:00", name: "Strokkur 間歇泉", type: "sight", note: "每6-10分鐘噴發", query: "Geysir", 
                        tags: ["錄影準備", "小心風向(濕身)"],
                        description: "非常活躍的間歇泉，噴發高度可達20-40公尺。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Strokkur%2C_Iceland.jpg/1200px-Strokkur%2C_Iceland.jpg" 
                    },
                    { 
                        time: "13:30", name: "黃金瀑布", type: "sight", note: "氣勢磅礴雙層瀑布", query: "Gullfoss Falls", 
                        tags: ["壯觀", "步道易滑"],
                        description: "冰島最壯麗的瀑布之一，冬季邊緣會結冰。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Gullfoss_Iceland_2014.jpg/1200px-Gullfoss_Iceland_2014.jpg" 
                    },
                    { 
                        time: "15:30", name: "Kerið 火山口湖", type: "sight", note: "紅色火山岩", query: "Kerid Crater", 
                        tags: ["需門票", "對比色絕美"],
                        description: "擁有3000年歷史的火山口湖，紅土與藍水形成對比。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Keri%C3%B0_crater_lake.jpg/1200px-Keri%C3%B0_crater_lake.jpg" 
                    },
                    { 
                        time: "18:00", name: "Hella 住宿", type: "hotel", note: "Stracta Hotel", query: "Stracta Hotel Hella", 
                        tags: ["極光觀測點", "戶外熱水桶"],
                        description: "位於南部的舒適飯店，適合觀測極光。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Hekla_volcano.jpg/1200px-Hekla_volcano.jpg" 
                    }
                ]
            },
            {
                day: 3, date: "11/22", title: "瀑布與黑沙", weather: { type: "Wind", temp: "2°C", wind: "20m/s" },
                stops: [
                    { 
                        time: "09:30", name: "水簾洞瀑布", type: "sight", note: "Seljalandsfoss", query: "Seljalandsfoss", 
                        tags: ["必備雨衣", "可繞至後方"],
                        description: "可以走到瀑布後方的獨特體驗，請注意防滑。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Seljalandsfoss%2C_Su%C3%B0urland%2C_Islandia%2C_2014-08-16%2C_DD_201-203_HDR.jpg/1200px-Seljalandsfoss%2C_Su%C3%B0urland%2C_Islandia%2C_2014-08-16%2C_DD_201-203_HDR.jpg" 
                    },
                    { 
                        time: "11:00", name: "彩虹瀑布", type: "sight", note: "Skógafoss", query: "Skógafoss", 
                        tags: ["白日夢冒險王", "可登頂"],
                        description: "寬闊壯麗的瀑布，陽光下常有彩虹。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Skogafoss_from_below.jpg/1200px-Skogafoss_from_below.jpg" 
                    },
                    { 
                        time: "15:00", name: "雷尼斯黑沙灘", type: "sight", note: "玄武岩柱群", query: "Reynisfjara Beach", 
                        tags: ["警告: 瘋狗浪", "玄武岩柱"],
                        description: "著名的黑沙灘與柱狀玄武岩，請務必遠離海浪。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Reynisfjara_Black_Sand_Beach.jpg/1200px-Reynisfjara_Black_Sand_Beach.jpg" 
                    },
                    { 
                        time: "17:30", name: "Vík 住宿", type: "hotel", note: "Hotel Vík í Mýrdal", query: "Hotel Vík í Mýrdal", 
                        tags: ["現代風格", "酒吧Happy Hour"],
                        description: "維克鎮上的設計旅店。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Vik_i_Myrdal_Church.jpg/1200px-Vik_i_Myrdal_Church.jpg" 
                    }
                ]
            },
            {
                day: 4, date: "11/23", title: "藍冰之歌", weather: { type: "Sun", temp: "-3°C", wind: "5m/s" },
                stops: [
                    { 
                        time: "09:00", name: "斯卡夫塔山", type: "sight", note: "冰川健行集合", query: "Skaftafell Booking Center", 
                        tags: ["預約: 09:30", "穿著登山鞋", "星際效應場景"],
                        description: "體驗走在冰川上的震撼。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Skaftafell_Glacier_Iceland.jpg/1200px-Skaftafell_Glacier_Iceland.jpg" 
                    },
                    { 
                        time: "13:30", name: "傑古沙龍冰河湖", type: "sight", note: "Jökulsárlón", query: "Jökulsárlón", 
                        tags: ["必看海豹", "藍色浮冰"],
                        description: "巨大的藍色冰山漂浮在湖面，景色夢幻。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Jokulsarlon_Glacier_Lagoon.jpg/1200px-Jokulsarlon_Glacier_Lagoon.jpg" 
                    },
                    { 
                        time: "14:30", name: "鑽石沙灘", type: "sight", note: "黑沙上的冰塊", query: "Diamond Beach Iceland", 
                        tags: ["攝影天堂", "晶瑩剔透"],
                        description: "海浪將碎冰沖上黑沙灘，宛如鑽石。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Iceland_Diamond_Beach.jpg/1200px-Iceland_Diamond_Beach.jpg" 
                    },
                    { 
                        time: "17:00", name: "赫本龍蝦餐", type: "food", note: "Pakkhús Restaurant", query: "Pakkhús Restaurant", 
                        tags: ["必吃: 魔法龍蝦", "不接受預約"],
                        description: "赫本鎮著名的龍蝦餐廳，由舊倉庫改建。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/20/Hofn_View_from_the_campsite.jpg/1200px-Hofn_View_from_the_campsite.jpg" 
                    }
                ]
            },
            {
                day: 5, date: "11/24", title: "東部峽灣", weather: { type: "Sun", temp: "1°C", wind: "6m/s" },
                stops: [
                    { 
                        time: "09:30", name: "天空之鏡", type: "sight", note: "蝙蝠山 Vestrahorn", query: "Stokksnes",
                        tags: ["攝影天堂", "倒影絕景"],
                        description: "Vestrahorn 山峰與黑沙灘淺灘形成的倒影絕景。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Vestrahorn_Island.jpg/1200px-Vestrahorn_Island.jpg" 
                    },
                    { 
                        time: "12:00", name: "Djúpivogur", type: "sight", note: "神鳥蛋雕塑", query: "Djúpivogur",
                        tags: ["34顆大理石蛋", "寧靜港灣"],
                        description: "著名的「神鳥蛋」裝置藝術。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Djupivogur_Eggs_of_Merry_Bay.jpg/1200px-Djupivogur_Eggs_of_Merry_Bay.jpg" 
                    },
                    { 
                        time: "15:00", name: "Seyðisfjörður", type: "sight", note: "彩虹路教堂", query: "Seyðisfjörður",
                        tags: ["白日夢冒險王場景", "藍色教堂"],
                        description: "滑板公路的終點，擁有美麗的彩虹路。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Seydisfjordur_view.jpg/1200px-Seydisfjordur_view.jpg" 
                    },
                    { 
                        time: "18:00", name: "Egilsstaðir", type: "hotel", note: "東部住宿", query: "Hótel Valaskjálf",
                        tags: ["東部最大城", "超市補給"],
                        description: "冰島東部的交通樞紐與住宿點。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Lagarfljót.jpg/1200px-Lagarfljót.jpg" 
                    }
                ]
            },
            {
                day: 6, date: "11/25", title: "魔幻北部", weather: { type: "Snow", temp: "-2°C", wind: "12m/s" },
                stops: [
                    { 
                        time: "10:00", name: "黛提瀑布", type: "sight", note: "Dettifoss", query: "Dettifoss",
                        tags: ["歐洲水量最大", "普羅米修斯"],
                        description: "氣勢驚人的巨大瀑布，冬季需注意路況。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Dettifoss_2011.jpg/1200px-Dettifoss_2011.jpg" 
                    },
                    { 
                        time: "12:30", name: "Hverir 地熱區", type: "sight", note: "火星地貌", query: "Hverir",
                        tags: ["硫磺味重", "橘紅色地表"],
                        description: "冒著蒸氣與泥漿池的地熱區，彷彿置身火星。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Hverar%C3%B6nd.jpg/1200px-Hverar%C3%B6nd.jpg" 
                    },
                    { 
                        time: "14:00", name: "Krafla 火山口", type: "sight", note: "Viti 火山口湖", query: "Krafla",
                        tags: ["蒂芬妮藍湖水", "地熱發電廠"],
                        description: "美麗的火山口湖。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Viti_Crater_Lake_Krafla.jpg/1200px-Viti_Crater_Lake_Krafla.jpg" 
                    },
                    { 
                        time: "16:30", name: "米湖住宿", type: "hotel", note: "Fosshotel Mývatn", query: "Fosshotel Mývatn",
                        tags: ["極光熱點", "湖景"],
                        description: "米湖旁的舒適住宿。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Myvatn_Summer.jpg/1200px-Myvatn_Summer.jpg" 
                    }
                ]
            },
            {
                day: 7, date: "11/26", title: "米湖與阿克雷里", weather: { type: "Sun", temp: "-4°C", wind: "5m/s" },
                stops: [
                    { 
                        time: "09:30", name: "黑色城堡", type: "sight", note: "Dimmuborgir", query: "Dimmuborgir",
                        tags: ["熔岩迷宮", "奇岩怪石"],
                        description: "天然的熔岩迷宮。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Dimmuborgir_2.jpg/1200px-Dimmuborgir_2.jpg" 
                    },
                    { 
                        time: "11:00", name: "米湖溫泉", type: "sight", note: "Nature Baths", query: "Mývatn Nature Baths",
                        tags: ["北部藍湖", "人潮較少"],
                        description: "北部的藍湖，可眺望米湖盆地。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Jar%C3%B6b%C3%B0in_vi%C3%B0_M%C3%BDvatn.jpg/1200px-Jar%C3%B0b%C3%B6%C3%B0in_vi%C3%B0_M%C3%BDvatn.jpg" 
                    },
                    { 
                        time: "14:00", name: "眾神瀑布", type: "sight", note: "Goðafoss", query: "Goðafoss Waterfall",
                        tags: ["歷史傳說", "壯闊"],
                        description: "優雅的馬蹄形瀑布。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Godafoss_in_winter.jpg/1200px-Godafoss_in_winter.jpg" 
                    },
                    { 
                        time: "16:00", name: "阿克雷里", type: "hotel", note: "北部首都", query: "Akureyri",
                        tags: ["愛心紅綠燈", "雙塔教堂"],
                        description: "冰島第二大城。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Akureyri_church.jpg/1200px-Akureyri_church.jpg" 
                    }
                ]
            },
            {
                day: 8, date: "11/27", title: "西部荒野", weather: { type: "Wind", temp: "0°C", wind: "18m/s" },
                stops: [
                    { 
                        time: "10:00", name: "格勞姆農場", type: "sight", note: "傳統草皮屋", query: "Glaumbær Farm",
                        tags: ["哈比人小屋", "歷史博物館"],
                        description: "保存完整的傳統草皮屋。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Glaumbaer_farmhouse.jpg/1200px-Glaumbaer_farmhouse.jpg" 
                    },
                    { 
                        time: "13:00", name: "犀牛石", type: "sight", note: "Hvítserkur", query: "Hvítserkur",
                        tags: ["海上巨石", "像恐龍"],
                        description: "海中奇特的玄武岩巨石。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Hvitserkur_2011.jpg/1200px-Hvitserkur_2011.jpg" 
                    },
                    { 
                        time: "17:00", name: "Stykkishólmur", type: "hotel", note: "西部住宿", query: "Fosshotel Stykkishólmur",
                        tags: ["美麗漁港", "白日夢冒險王"],
                        description: "斯奈山半島北側的美麗小鎮。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Stykkish%C3%B3lmur_Harbour.jpg/1200px-Stykkish%C3%B3lmur_Harbour.jpg" 
                    }
                ]
            },
            {
                day: 9, date: "11/28", title: "半島縮影", weather: { type: "Snow", temp: "2°C", wind: "10m/s" },
                stops: [
                    { 
                        time: "09:30", name: "教會山", type: "sight", note: "Kirkjufell", query: "Kirkjufell Mountain",
                        tags: ["必拍倒影", "權力遊戲"],
                        description: "冰島最經典的草帽山。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Kirkjufell_in_Iceland.jpg/1200px-Kirkjufell_in_Iceland.jpg" 
                    },
                    { 
                        time: "13:30", name: "巨人像", type: "sight", note: "Arnarstapi", query: "Arnarstapi",
                        tags: ["章魚爺爺", "海蝕洞"],
                        description: "壯觀的玄武岩海岸線與海蝕洞。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Arnarstapi_statue.jpg/1200px-Arnarstapi_statue.jpg" 
                    },
                    { 
                        time: "15:00", name: "黑教堂", type: "sight", note: "Búðakirkja", query: "Búðakirkja",
                        tags: ["極簡攝影", "黑色木造"],
                        description: "孤獨矗立在荒野中的黑色教堂。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/Budakirkja.jpg/1200px-Budakirkja.jpg" 
                    },
                    { 
                        time: "18:00", name: "雷克雅維克", type: "hotel", note: "返回首都", query: "Center Hotels Plaza",
                        tags: ["環島完成", "慶祝晚餐"],
                        description: "回到雷克雅維克。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Reykjavik_center.jpg/1200px-Reykjavik_center.jpg" 
                    }
                ]
            },
            {
                day: 10, date: "11/29", title: "再見冰島", weather: { type: "Sun", temp: "3°C", wind: "5m/s" },
                stops: [
                    { 
                        time: "09:30", name: "哈爾格林姆教堂", type: "sight", note: "登頂俯瞰", query: "Hallgrímskirkja",
                        tags: ["俯瞰市區", "管風琴"],
                        description: "雷克雅維克地標教堂。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Hallgrimskirkja_Reykjavik.jpg/1200px-Hallgrimskirkja_Reykjavik.jpg" 
                    },
                    { 
                        time: "11:00", name: "Harpa 音樂廳", type: "sight", note: "玻璃蜂巢", query: "Harpa Concert Hall",
                        tags: ["光影建築", "海邊漫步"],
                        description: "美麗的玻璃帷幕建築。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/Harpa_Reykjavik.jpg/1200px-Harpa_Reykjavik.jpg" 
                    },
                    { 
                        time: "13:00", name: "Laugavegur", type: "food", note: "購物大街", query: "Laugavegur",
                        tags: ["羊毛衣", "紀念品"],
                        description: "市區主要購物街。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Laugavegur_Reykjavik.jpg/1200px-Laugavegur_Reykjavik.jpg" 
                    },
                    { 
                        time: "15:00", name: "前往機場", type: "arrival", note: "還車搭機", query: "Keflavík International Airport",
                        tags: ["提早3小時", "檢查車況"],
                        description: "前往機場，準備搭機返程。",
                        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Keflavik_International_Airport.jpg/1200px-Keflavik_International_Airport.jpg" 
                    }
                ]
            }
        ];

        // --- 3. 工具資料 (Updated) ---
        const flightInfo = {
            dep: { airline: "Cathay Pacific", code: "CX/FI", from: "HKG", to: "KEF", time: "11/20 00:25" },
            arr: { airline: "Cathay Pacific", code: "FI/CX", from: "KEF", to: "HKG", time: "11/29 14:00" }
        };

        const hotels = [
            { name: "Center Hotels Plaza", loc: "Reykjavik", contact: "+354 595 8500" },
            { name: "Stracta Hotel", loc: "Hella", contact: "+354 531 8010" },
            { name: "Hotel Vík", loc: "Vík", contact: "+354 487 1480" }
        ];

        const emergency = [
            { title: "緊急救助 (警察/救護/消防)", number: "112" },
            { title: "醫療協助 (非緊急)", number: "1770" },
            { title: "牙科急診", number: "+354 575 0505" },
            { title: "警察局 (非緊急)", number: "+354 444 1000" }
        ];

        // --- 4. 元件 ---

        // 增強版 ImageWithFallback 元件
        const ImageWithFallback = ({ src, alt, stopName }) => {
            const [error, setError] = useState(false);

            const handleError = () => {
                setError(true);
            };

            if (error || !src) {
                // Fallback: 漂亮的純色背景 + 景點名稱
                // 使用更柔和的 Zen 風格色調
                const colors = ['bg-[#E0E0E0]', 'bg-[#D8DCD6]', 'bg-[#E6E2DD]', 'bg-[#C9C0BB]'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                
                return (
                    <div className={`w-full h-full flex flex-col items-center justify-center ${randomColor} text-zen-text p-6 text-center transition-colors duration-500`}>
                        <Icons.Camera size={36} className="mb-3 text-zen-sub opacity-60" />
                        <span className="text-lg font-serif font-bold tracking-wide text-zen-text">{stopName}</span>
                    </div>
                );
            }

            return (
                <img 
                    src={src} 
                    alt={alt}
                    className="w-full h-full object-cover opacity-95 hover:opacity-100 transition-opacity duration-700"
                    loading="lazy"
                    onError={handleError}
                    referrerPolicy="no-referrer"
                />
            );
        };

        const StopItem = ({ stop, isFirst, isLast }) => {
            const [isOpen, setIsOpen] = useState(false);

            const renderIcon = (type, className) => {
                switch(type) {
                    case 'sight': return <Icons.Camera size={14} className={className} />;
                    case 'food': return <Icons.Food size={14} className={className} />;
                    case 'hotel': return <Icons.Bed size={14} className={className} />;
                    case 'arrival': return <Icons.Plane size={14} className={className} />;
                    case 'transport': return <Icons.Car size={14} className={className} />;
                    default: return <div className={`w-2 h-2 rounded-full ${className}`} />;
                }
            };

            const getIconBgColor = (type) => {
                switch(type) {
                    case 'sight': return 'bg-zen-green border-zen-green'; // Use solid colors for better visibility
                    case 'food': return 'bg-zen-red border-zen-red';
                    case 'hotel': return 'bg-zen-blue border-zen-blue';
                    case 'arrival': return 'bg-zen-accent border-zen-accent';
                    case 'transport': return 'bg-zen-sub border-zen-sub';
                    default: return 'bg-stone-400 border-stone-400';
                }
            };

            const openMap = (query) => {
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank');
            };

            return (
                <div className="relative pl-8 pb-8 last:pb-0">
                    {/* Timeline Line */}
                    {!isLast && <div className="absolute left-[3px] top-9 bottom-0 w-[2px] bg-stone-200"></div>}
                    
                    {/* Timeline Icon */}
                    <div className={`absolute -left-[14px] top-0 w-9 h-9 rounded-full border-4 border-white shadow-md flex items-center justify-center text-white z-10 ${getIconBgColor(stop.type)}`}>
                        {renderIcon(stop.type, "text-white")}
                    </div>
                    
                    <div className="bg-white rounded-2xl p-0 border border-stone-100 shadow-sm hover:shadow-md transition-all overflow-hidden">
                        {/* Image Section with Fallback */}
                        <div className="h-40 w-full relative overflow-hidden bg-stone-100">
                            <ImageWithFallback src={stop.img} alt={stop.name} stopName={stop.name} />
                            <div className="absolute top-3 right-3 bg-white/80 backdrop-blur-md text-zen-text text-xs font-bold px-3 py-1 rounded-full shadow-sm">
                                {stop.time}
                            </div>
                        </div>

                        <div className="p-5">
                            <div className="flex justify-between items-start mb-3">
                                <div>
                                    <h4 className="font-bold text-stone-800 text-xl serif-font mb-1">{stop.name}</h4>
                                    <p className="text-sm text-stone-500 font-sans">{stop.note}</p>
                                </div>
                                <button 
                                    onClick={() => openMap(stop.query)}
                                    className="ml-3 p-2.5 bg-stone-50 text-zen-text rounded-full border border-stone-200 hover:bg-zen-text hover:text-white transition-colors shadow-sm"
                                    title="在 Google Maps 開啟"
                                >
                                    <Icons.MapPin size={18} />
                                </button>
                            </div>

                            {/* Tags */}
                            {stop.tags && (
                                <div className="flex flex-wrap gap-2 mb-4">
                                    {stop.tags.map((tag, i) => (
                                        <span key={i} className="text-[10px] tracking-wider font-medium bg-stone-50 text-zen-sub border border-stone-200 px-2 py-1 rounded-md uppercase">
                                            {tag}
                                        </span>
                                    ))}
                                </div>
                            )}

                            {/* Action Bar */}
                            <div className="pt-3 border-t border-stone-100 flex justify-start">
                                <button 
                                    onClick={() => setIsOpen(!isOpen)}
                                    className={`flex items-center text-xs font-bold px-0 py-1 transition-colors ${isOpen ? 'text-zen-text' : 'text-zen-sub hover:text-zen-text'}`}
                                >
                                    <Icons.BookOpen size={14} className="mr-1.5"/>
                                    {isOpen ? '收起介紹' : '查看介紹'}
                                </button>
                            </div>

                            {/* Collapsible Description */}
                            <div className={`overflow-hidden transition-all duration-500 ease-in-out ${isOpen ? 'max-h-96 opacity-100 mt-3' : 'max-h-0 opacity-0'}`}>
                                <div className="bg-[#F9F9F7] p-4 rounded-xl text-sm text-stone-600 leading-relaxed border border-stone-100 font-serif italic">
                                    {stop.description}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ToolsSection = () => {
            return (
                <div className="pb-24 px-6 pt-6 animate-fade-in">
                    <h2 className="text-2xl font-serif font-bold text-zen-text mb-6">旅行工具箱</h2>

                    {/* Flights */}
                    <div className="bg-white rounded-2xl shadow-soft p-6 mb-6 border border-stone-100 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-1.5 h-full bg-zen-blue"></div>
                        <h3 className="flex items-center gap-2 text-xs font-bold text-zen-sub uppercase tracking-widest mb-6">
                            <Icons.Plane size={16}/> 航班資訊
                        </h3>
                        <div className="flex justify-between items-center mb-6">
                            <div>
                                <div className="text-4xl font-serif text-zen-text mb-1">{flightInfo.dep.from}</div>
                                <div className="text-xs text-zen-sub font-medium tracking-wide">HONG KONG</div>
                            </div>
                            <div className="flex-1 px-6 flex flex-col items-center">
                                <div className="text-[10px] text-zen-sub mb-2 font-medium">~16H</div>
                                <div className="w-full h-px bg-stone-300 relative flex items-center">
                                    <div className="w-1 h-1 bg-stone-300 rounded-full absolute left-0"></div>
                                    <div className="w-full border-t border-dashed border-stone-300"></div>
                                    <Icons.Plane size={14} className="text-stone-300 absolute right-0 transform rotate-90" />
                                </div>
                            </div>
                            <div className="text-right">
                                <div className="text-4xl font-serif text-zen-text mb-1">{flightInfo.dep.to}</div>
                                <div className="text-xs text-zen-sub font-medium tracking-wide">REYKJAVIK</div>
                            </div>
                        </div>
                        <div className="flex justify-between text-sm bg-stone-50 p-4 rounded-xl border border-stone-100">
                            <div className="flex flex-col">
                                <span className="text-xs text-stone-400 mb-1">Airline</span>
                                <span className="font-medium text-zen-text">{flightInfo.dep.airline}</span>
                            </div>
                            <div className="flex flex-col text-right">
                                <span className="text-xs text-stone-400 mb-1">Departure</span>
                                <span className="font-medium text-zen-text">{flightInfo.dep.time}</span>
                            </div>
                        </div>
                    </div>

                    {/* Hotels & Emergency Grid */}
                    <div className="grid grid-cols-1 gap-6 mb-6">
                        <div className="bg-white rounded-2xl shadow-soft p-6 border border-stone-100">
                            <h3 className="flex items-center gap-2 text-xs font-bold text-zen-sub uppercase tracking-widest mb-4">
                                <Icons.Bed size={16}/> 住宿清單
                            </h3>
                            <div className="space-y-4">
                                {hotels.map((h, i) => (
                                    <div key={i} className="flex justify-between items-center text-sm border-b border-stone-50 pb-3 last:border-0 last:pb-0">
                                        <div>
                                            <div className="font-medium text-zen-text text-base">{h.name}</div>
                                            <div className="text-xs text-stone-400 mt-0.5">{h.loc}</div>
                                        </div>
                                        <a href={`tel:${h.contact}`} className="w-8 h-8 rounded-full bg-stone-50 flex items-center justify-center text-zen-blue hover:bg-zen-blue hover:text-white transition-colors">
                                            <Icons.Phone size={14}/>
                                        </a>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl shadow-soft p-6 border-l-4 border-l-red-400 border border-stone-100">
                            <h3 className="flex items-center gap-2 text-xs font-bold text-red-800 uppercase tracking-widest mb-4">
                                <Icons.Phone size={16}/> 緊急聯絡 (冰島當地)
                            </h3>
                            <div className="grid grid-cols-2 gap-3">
                                {emergency.map((e, i) => (
                                    <div key={i} className="bg-stone-50 p-3 rounded-xl text-center border border-stone-100">
                                        <div className="text-[10px] text-stone-500 mb-1 font-medium">{e.title}</div>
                                        <div className="text-xl font-bold text-zen-text font-serif tracking-wide">{e.number}</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const App = () => {
            const [activeTab, setActiveTab] = useState('itinerary');
            const [expandedDay, setExpandedDay] = useState(1);
            const scrollRef = useRef(null);

            // Effect to scroll active date into view
            useEffect(() => {
                if (scrollRef.current) {
                    const activeEl = scrollRef.current.children[expandedDay - 1];
                    if (activeEl) {
                        activeEl.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                    }
                }
            }, [expandedDay]);

            const renderItinerary = () => (
                <div className="pb-24 animate-fade-in">
                    {/* Horizontal Date Selector */}
                    <div className="bg-white/90 backdrop-blur-lg sticky top-0 z-30 shadow-sm border-b border-stone-100 mb-6 -mx-4 px-4 pt-3 pb-3 overflow-x-auto hide-scrollbar flex space-x-3" ref={scrollRef}>
                        {tripData.map((item) => (
                            <button
                                key={item.day}
                                onClick={() => setExpandedDay(item.day)}
                                className={`flex-shrink-0 flex flex-col items-center justify-center min-w-[64px] h-14 rounded-xl transition-all duration-300 border ${
                                    expandedDay === item.day 
                                    ? 'bg-zen-text text-white border-zen-text shadow-lg transform scale-105' 
                                    : 'bg-white text-stone-400 border-stone-100 hover:border-stone-300'
                                }`}
                            >
                                <span className="text-[9px] uppercase font-bold tracking-widest opacity-80">Day {item.day}</span>
                                <span className="text-sm font-bold mt-0.5">{item.date}</span>
                            </button>
                        ))}
                    </div>

                    {/* 只顯示被選中的日期 (Filter Logic) */}
                    {tripData
                        .filter(item => item.day === expandedDay)
                        .map((item) => (
                        <div key={item.day} className="mb-6 animate-slide-up">
                            {/* Day Header Info */}
                            <div className="mb-6 px-2">
                                <div className="flex justify-between items-end mb-2">
                                    <h3 className="text-3xl font-bold text-zen-text serif-font leading-tight">{item.title}</h3>
                                    <div className="text-right">
                                        <span className="text-xs font-bold text-stone-400 tracking-widest uppercase block mb-1">Weather</span>
                                        <div className="flex items-center bg-white border border-stone-200 px-3 py-1.5 rounded-full shadow-sm">
                                            {item.weather.type === 'Snow' ? <Icons.Snow size={14} className="mr-2 text-zen-sub"/> : 
                                             item.weather.type === 'Wind' ? <Icons.Wind size={14} className="mr-2 text-zen-blue"/> :
                                             <Icons.Sun size={14} className="mr-2 text-amber-500"/>}
                                            <span className="text-xs font-bold text-zen-text">{item.weather.temp}</span>
                                        </div>
                                    </div>
                                </div>
                                <div className="h-1 w-12 bg-zen-accent rounded-full"></div>
                            </div>

                            {/* Card Body */}
                            <div className="">
                                <div className="relative ml-3 mt-2 space-y-8">
                                    {item.stops.map((stop, idx) => (
                                        <StopItem 
                                            key={idx} 
                                            stop={stop} 
                                            isFirst={idx === 0} 
                                            isLast={idx === item.stops.length - 1} 
                                        />
                                    ))}
                                </div>
                            </div>
                        </div>
                    ))}
                    
                    <div className="text-center text-xs text-stone-400 mt-12 mb-8 tracking-widest uppercase font-medium">
                        Enjoy your trip in Iceland
                    </div>
                </div>
            );

            return (
                <div className="max-w-md mx-auto h-screen flex flex-col bg-stone-50 font-sans">
                    <header className="bg-white px-6 pt-14 pb-6 shadow-sm z-10 relative border-b border-stone-100">
                        <div className="flex justify-between items-center">
                            <div>
                                <p className="text-[10px] font-bold tracking-[0.2em] text-zen-sub uppercase mb-1">Itinerary</p>
                                <h1 className="text-2xl font-black text-zen-text serif-font tracking-wide">冰島環島之旅</h1>
                            </div>
                            <div className="w-10 h-10 rounded-full bg-stone-100 flex items-center justify-center border border-stone-200 text-stone-400 font-serif italic font-bold">
                                Ic
                            </div>
                        </div>
                    </header>

                    <main className="flex-1 overflow-y-auto px-5 py-4 hide-scrollbar z-20 relative bg-[#FAFAF9]">
                        {activeTab === 'itinerary' ? renderItinerary() : <ToolsSection />}
                    </main>

                    <nav className="bg-white/90 backdrop-blur-xl border-t border-stone-200 px-8 py-4 flex justify-around items-center absolute bottom-0 w-full max-w-md z-30 pb-safe shadow-[0_-5px_25px_rgba(0,0,0,0.03)]">
                        <button 
                            onClick={() => setActiveTab('itinerary')}
                            className={`flex flex-col items-center space-y-1.5 transition-all duration-300 ${activeTab === 'itinerary' ? 'text-zen-text scale-105' : 'text-stone-300 hover:text-stone-400'}`}
                        >
                            <Icons.MapPin size={22} strokeWidth={activeTab === 'itinerary' ? 2.5 : 2} />
                            <span className="text-[10px] font-bold tracking-widest uppercase">行程</span>
                        </button>
                        <div className="w-px h-8 bg-stone-100"></div>
                        <button 
                            onClick={() => setActiveTab('tools')}
                            className={`flex flex-col items-center space-y-1.5 transition-all duration-300 ${activeTab === 'tools' ? 'text-zen-text scale-105' : 'text-stone-300 hover:text-stone-400'}`}
                        >
                            <Icons.Briefcase size={22} strokeWidth={activeTab === 'tools' ? 2.5 : 2} />
                            <span className="text-[10px] font-bold tracking-widest uppercase">工具</span>
                        </button>
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
